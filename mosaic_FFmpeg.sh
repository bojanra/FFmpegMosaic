#!/bin/bash 
 
 ffmpegX -y -re -i 'video/tsm_sample_kratek.ts' -i 'video/ts_kratek.ts' -i 'video/tsm_sample_kratek.ts' -loop 1 -f image2 -r 5 -i 'top_layer/active_layer.png' -map 3:v -filter_complex  " nullsrc=1920x1080, lutrgb=126:126:126 [base]; [2:v:0] setpts=PTS-STARTPTS, scale=931x523 [TV SLO 2:v];  [2:a:0] showvolume=f=0.5:c=0x00ffff:b=4:w=493:h=15:o=v:ds=log:dm=2:p=1, format=yuv420p [TV SLO 2:a]; [1:v:0] setpts=PTS-STARTPTS, scale=931x523 [TV SLO 1:v];  [1:a:0] showvolume=f=0.5:c=0x00ffff:b=4:w=493:h=15:o=v:ds=log:dm=2:p=1, format=yuv420p [TV SLO 1:a]; [0:v:0] setpts=PTS-STARTPTS, scale=931x523 [Koper:v];  [0:a:0] showvolume=f=0.5:c=0x00ffff:b=4:w=493:h=15:o=v:ds=log:dm=2:p=1, format=yuv420p [Koper:a]; [3:v] setpts=PTS-STARTPTS, scale=1920x1080 [topLayer];  [base] [TV SLO 2:v] overlay=shortest=1: x=9: y=549  [TV SLO 2:audioLayer]; [TV SLO 2:audioLayer][TV SLO 2:a] overlay=shortest=1:x=906: y=549 [TV SLO 2:layer]; [TV SLO 2:layer] [TV SLO 1:v] overlay=shortest=1: x=978: y=5  [TV SLO 1:audioLayer]; [TV SLO 1:audioLayer][TV SLO 1:a] overlay=shortest=1:x=1875: y=5 [TV SLO 1:layer]; [TV SLO 1:layer] [Koper:v] overlay=shortest=1: x=9: y=5  [Koper:audioLayer]; [Koper:audioLayer][Koper:a] overlay=shortest=1:x=906: y=5 [Koper:layer]; [Koper:layer] [topLayer] overlay=shortest=1: x=0: y=0 " -strict experimental -vcodec libx264 -b:v 4M -minrate 3M -maxrate 3M -bufsize 6M -preset ultrafast  -profile:v high -level 4.0 -an -threads 0\
    -f segment -segment_list /var/www/html/playlist.m3u8 -segment_list_flags +live -segment_time 10 /var/www/html/out%03d.ts